{% extends 'base.html' %}
{% load static %}

{% block head %}
<title>Pendientes</title>
{% endblock %}

{% block body %}

<main>
    <a href="{% url 'bank_view' %}">üè† Volver al Banco Gringotts</a>

    <!-- Pending loans -->
    <div>
        {% if pending_loans %}
        <h3>Pr√©stamos pendientes</h3>
        <table class="table">
            <tr>
                <th>Monto solicitado</th>
                <th>Monto a devolver</th>
                <th>Fecha de devoluci√≥n</th>
                <th></th>
            </tr>

            {% for loan in pending_loans %}
            <tr>
                <td>{{ loan.amount_requested }}</td>
                <td>{{ loan.amount_due }}</td>
                <td
                    {% if loan.is_overdue %} style="color:red; font-weight:bold"
                    {% elif loan.is_near_due %} style="color:orange; font-weight:bold"
                    {% endif %}>
                    {{ loan.due_date }}
                </td>
                <td>
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="loan_id" value="{{ loan.id }}">
                        <button type="button" class="btn btn-primary" data-title="Confirmaci√≥n de pago"
                            data-message="¬øEst√° seguro de que desea pagar el monto debido ({{ loan.amount_due }} galeones)? (Esta acci√≥n es irreversible)?"
                            onclick="showConfirm(this)">
                            Pagar
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>

        {% else %}
            <p>No tienes pr√©stamos pendientes.</p>
        {% endif %}
    </div>
</main>

{% endblock %}

<!-- Modals templates -->
{% block modals %}
{{ block.super }}
{% endblock %}